{"mappings":"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","sources":["src/js/refs.js","src/js/modal/showModal.js","src/js/api/const.js","src/js/api/requst/getBook.js","src/js/markup/getBookMarkup.js","src/js/renderBook.js","src/js/method/postFormSubmit.js","src/js/api/requst/postBook.js","src/js/method/updateBookForm.js","src/js/valid/searchBook.js","src/js/api/requst/updateBook.js","src/js/method/deleteBook.js","src/js/api/requst/washBook.js","src/js/index.js"],"sourcesContent":["const ref = {\nbtnControl: document.querySelector('.control-btn'),\nform: document.querySelectorAll('form[data-control]'),\nbookEl: document.querySelector('div.books')\n}\n\nexport default ref;","import ref from '../refs';\n\nconst { form } = ref;\nconst [add, update] = form;\n\nfunction showModalWindow(event) {\n  const choiseBtn = event.target.classList.value;\n  switch (choiseBtn) {\n    case 'add':\n      add.classList.add('show');\n      update.classList.remove('show');\n\n      break;\n    case 'update':\n      add.classList.remove('show');\n      update.classList.add('show');\n      break;\n    case 'hide':\n      add.classList.remove('show');\n      update.classList.remove('show');\n      break;\n  }\n}\n\nexport default showModalWindow;\n","export const BASE_URL = 'http://localhost:3000/books';\n\nexport const headers = (type, body = {}) => {\n  return {\n    method: type,\n    body: JSON.stringify(body),\n    headers: {\n      'content-type': 'application/json',\n      'charset': 'UTF-8',\n    },\n  };\n};\n","import { BASE_URL } from \"../const\";\n\nfunction fetchBook(){\n    \nreturn fetch(`${BASE_URL}`).then(response => {\nif(!response.ok){\nthrow new Error(response.Error)\n}\nreturn response.json()\n})\n\n}\n\nexport default fetchBook;","function markupBooks(books) {\n  return books.map(({id, name, rating, describe}) =>{\n  return `\n<div class=\"books__item\" data-id=${id}>\n<div class=\"books__name\"><span>name:</span>${name}</div>\n<div class=\"books__rating\"><span>rating:</span>${rating}</div>\n<div class=\"books__describe\">\n${describe}\n</div>\n<button class=\"delete\">delete</button>\n</div>\n`;\n}).join('')\n}\n\nexport default markupBooks;\n","import fetchBook from './api/requst/getBook';\nimport markupBooks from './markup/getBookMarkup';\nimport ref from './refs';\n\nfunction renderBooks() {\n  fetchBook().then(books => {\n    ref.bookEl.replaceChildren();\n    //replaceChildren - заменяет только дочерние элементы элемента\n    ref.bookEl.insertAdjacentHTML('beforeend', markupBooks(books));\n  });\n}\n\nexport default renderBooks;\n","import postBook from '../api/requst/postBook';\nimport { headers } from '../api/const';\n\nfunction postBookForm(event) {\n  event.preventDefault();\n  const objValue = {};\n\n  const formData = new FormData(event.currentTarget);\n  \n  for (let [key, value] of formData){\n    if(!value){\n    alert(`Not: ${key}`)\n      return\n  }\n  \n    objValue[key] = value;\n  }\n \n  postBook(headers('POST', objValue));\n  event.currentTarget.reset();\n}\n\nexport default postBookForm;\n","import renderBooks from \"../../renderBook\";\nimport { BASE_URL } from \"../const\";\n\nfunction postBook(handler){\n    \nreturn fetch(`${BASE_URL}`, handler).then(response => {\nif(!response.ok){\nthrow new Error(response.Error)\n}\nreturn response.json()\n}).then(renderBooks)\n\n}\n\nexport default postBook;","import fetchBook from \"../api/requst/getBook\";\nimport refurbishBook from \"../api/requst/updateBook\";\nimport { headers } from \"../api/const\";\nimport renderBooks from \"../renderBook\";\nimport searchValidBook from \"../valid/searchBook\";\n\nfunction updateBook(event){\n    event.preventDefault()\n    // const inputName = event.currentTarget.elements.name.value;\n    // const rating = event.currentTarget.elements.rating.value;\n    // const describe = event.currentTarget.elements.describe.value\n\n    const {name:{value: inputName},rating:{value: rating},describe:{value: describe}} = event.currentTarget.elements\n\n    searchValidBook(inputName).then(book => {\n     if(!book){\n        alert('Book not found')\n        return\n    }\n    if(/^(10|[1-9])$/.test(rating)){\n        refurbishBook(book.id,headers(\"PATCH\",{rating,describe})).then(renderBooks)\n        event.target.reset()    \n    }else{\n    alert(\"Rating is incorrect (1-10)\")\n    }\n    \n})\n}\n\nexport default updateBook;","import fetchBook from \"../api/requst/getBook\";\n\nfunction searchValidBook(nameBook){\nreturn fetchBook().then(data => data.find(({name}) => name.toLowerCase() === nameBook.toLowerCase())\n)\n}\n\nexport default searchValidBook;","import { BASE_URL } from \"../const\";\n\nfunction refurbishBook(id,handler){\n    return fetch(`${BASE_URL}/${id}`,handler).then(response => {\n    if(!response.ok){\n    throw new Error(response.Error)\n    }\n    return response.json()\n    })\n}\n\nexport default refurbishBook;","import { headers } from \"../api/const\";\nimport deleteBookContainer from \"../api/requst/washBook\";\n\nfunction removeBook(event){\n if(!event.target.classList.contains('delete')) return\n\n const idEl = event.target.parentElement.dataset.id\n \n deleteBookContainer(idEl,headers(\"DELETE\"))\n\n}\n\nexport default removeBook;","import { BASE_URL } from \"../const\";\nimport renderBooks from \"../../renderBook\";\n\nfunction deleteBookContainer(id,headers){\n    return fetch(`${BASE_URL}/${id}`,headers).then(renderBooks)\n}\n\nexport default deleteBookContainer;","import ref from \"./refs\";\nimport showModalWindow from \"./modal/showModal\";\nimport renderBooks from \"./renderBook\";\nimport postBookForm from \"./method/postFormSubmit\";\nimport updateBook from \"./method/updateBookForm\";\nimport removeBook from \"./method/deleteBook\";\n\n\nrenderBooks();\n\nconst{ btnControl, form, bookEl } = ref;\nconst [add, update] = form\n\nbtnControl.addEventListener('click', showModalWindow)\nadd.addEventListener('submit', postBookForm)\nupdate.addEventListener('submit', updateBook)\nbookEl.addEventListener('click', removeBook)"],"names":["$ee27a4d7c64fc8c4$export$2e2bcd8739ae039","btnControl","document","querySelector","form","querySelectorAll","bookEl","$9faec1c61bed3a01$var$form","$9faec1c61bed3a01$var$add","$9faec1c61bed3a01$var$update","$9faec1c61bed3a01$export$2e2bcd8739ae039","event","target","classList","value","add","remove","$435a36f97a193a85$export$838e2a576d4d6ff6","type","body","method","JSON","stringify","headers","charset","$08f0173c5b0dc8ba$export$2e2bcd8739ae039","fetch","then","response","ok","Error","json","$1cea861749d1301a$export$2e2bcd8739ae039","books","map","id","name","rating","describe","join","$85a94fcb22c69e6e$export$2e2bcd8739ae039","replaceChildren","insertAdjacentHTML","$379a9f28ba6e4591$export$2e2bcd8739ae039","preventDefault","objValue","formData","FormData","currentTarget","key","alert","handler","reset","$6aa376c798ce3dc0$export$2e2bcd8739ae039","inputName","elements","nameBook","data","find","toLowerCase","book","test","$04cb493d3bb6ed98$export$2e2bcd8739ae039","contains","idEl","parentElement","dataset","$85a5f86b715fe7db$var$btnControl","$85a5f86b715fe7db$var$form","$85a5f86b715fe7db$var$bookEl","$85a5f86b715fe7db$var$add","$85a5f86b715fe7db$var$update","addEventListener"],"version":3,"file":"index.bdca8f9a.js.map"}